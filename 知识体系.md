# 1、发放实例过程中的关键组件及其角色
**发放实例** 指的是创建这台虚拟机的**整个过程**。这个词比单纯的“创建”或“启动”含义更广，它包括了从用户发起请求到最终得到一个可用虚拟机的完整工作流。

让我们看看在像华为云Stack（基于OpenStack）这样的环境中，发放实例时有哪些主要组件参与：

1.  **Dashboard / CLI / API**：
    *   **角色**：**用户交互入口**。你通过在网页上点击按钮或运行命令，最终都会转化为一个标准的API调用请求。

2.  **Nova**：**计算服务**，是发放实例的**总指挥**。
    *   **接收请求**：它通过 API 接收到“创建一台XX配置的云服务器”的指令。
    *   **调度决策**：它的 **Scheduler** 子组件会从资源池中筛选出一台最合适的物理服务器来承载这个新实例。
    *   **协调工作**：**Nova 本身不直接处理网络和存储**，它会向**Neutron**和**Cinder**等服务下达指令，让它们配合完成工作。

3.  **Neutron**：**网络服务**。
    *   **角色**：负责一切网络相关事务。Nova 会通知 Neutron：“请为这个新实例分配一个IP，并连接到指定的虚拟网络（VPC）上，配置好安全组规则。”
    *   **题目关联**：你之前做对的题中，Router、Security Groups 这些高级网络功能就是由 Neutron 的 **Service Plugin** 实现的。

4.  **Cinder**：**块存储服务**。
    *   **角色**：负责提供和管理硬盘。Nova 会通知 Cinder：“请根据要求，创建一块虚拟硬盘，并挂载到新实例上。”

5.  **Glance**：**镜像服务**。
    *   **角色**：负责存储和管理操作系统模板（镜像）。Nova 会从 Glance 那里获取用户选择的系统镜像（如 CentOS, Windows），并以此为基础来创建实例的系统盘。

6.  **Keystone**：**身份认证服务**。
    *   **角色**：**云平台的“安全守门人”**。在整个发放过程中，上述所有组件之间的每次互相调用，都需要经过 Keystone 来验证身份和权限，确保“是合法的请求在访问合法的资源”。

7.  **TaskCenter / 组合API**：
    *   **角色**：**流程编排器**。对于复杂的发放流程（例如一次性创建多台关联的实例），这些组件负责将多个步骤串联起来，确保它们按正确顺序执行，并处理错误和回滚。